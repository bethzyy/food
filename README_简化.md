# 养生饮食推荐应用 - 快速指南

## 🚀 最简单的启动方式

**双击运行：`run.bat`**

就这么简单！

---

## 📋 功能特点

- ✅ 自动识别24节气
- ✅ 智能饮食推荐（中医+营养学）
- ✅ 支持日常饮食和药膳饮食
- ✅ 自动获取位置和天气
- ✅ 中国风雅致界面
- ✅ 四季动态主题

---

## 🔑 API Key设置

### 方式1：环境变量（推荐，一次设置永久有效）

```bash
# Windows PowerShell
$env:ZHIPU_API_KEY="你的API Key"

# Windows CMD
set ZHIPU_API_KEY=你的API Key
```

然后运行 `run.bat`

### 方式2：浏览器输入（无需设置）

直接运行 `run.bat`，首次使用时会提示输入（会自动保存）

---

## 🎯 使用步骤

1. **启动应用**
   ```
   双击 run.bat
   ```

2. **浏览器自动打开** http://localhost:8000

3. **选择设置**
   - 日期时间（自动获取，可修改）
   - 位置天气（自动获取，可修改）
   - 餐次（早餐/午餐/晚餐）
   - 类型（日常/药膳）

4. **生成推荐**
   ```
   点击 "✨ 生成饮食推荐" 按钮
   ```

5. **查看结果**
   - 节气信息
   - 详细菜品
   - 营养分析
   - 统计图表

---

## 📁 文件说明

### 核心文件
- `run.bat` - **一键启动脚本**（使用这个！）
- `app_server.py` - 统一服务器（支持环境变量+手动输入）
- `index.html` - 主页面
- `app.js` - 主程序逻辑
- `style.css` - 样式文件

### 配置文件
- `prompts/food_recommendation_prompt.txt` - AI提示词

### 测试文件（可选）
- `test_env_key.py` - 环境变量测试工具
- `test_env.html` - 测试页面

### 文档文件
- `故障排查.md` - 问题诊断指南
- `自测报告.md` - 测试报告
- `更新说明.md` - 版本更新日志

---

## ⚠️ 常见问题

### Q1: 设置了环境变量还是提示输入？
**A**: 确保在**同一命令行窗口**设置环境变量并启动应用

```bash
# 正确做法
$env:ZHIPU_API_KEY="your-key"  # 设置
python app_server.py             # 启动（同一窗口）
```

### Q2: 端口8000被占用？
**A**: 关闭其他占用8000端口的程序，或修改 `app_server.py` 中的 `PORT = 8000` 为其他端口

### Q3: 浏览器没自动打开？
**A**: 手动访问 http://localhost:8000

### Q4: 位置获取失败？
**A**: 正常现象，可以手动选择天气，不影响使用

---

## 🛠️ 高级用法

### 手动启动
```bash
python app_server.py
```

### 测试环境变量
```bash
python test_env_key.py
# 访问 http://localhost:8001/test_env.html
```

---

## 📞 获取API Key

访问智谱AI官网：https://open.bigmodel.cn/

1. 注册并登录
2. 进入控制台
3. 获取API Key（格式：id.secret）

---

## 🎨 界面预览

- **春季**（3-5月）：嫩绿渐变
- **夏季**（6-8月）：清爽蓝色
- **秋季**（9-11月）：温暖橙色
- **冬季**（12-2月）：柔和灰蓝

---

## 📝 更新日志

### v2.0（最新）
- ✅ 环境变量支持
- ✅ 中国风设计
- ✅ 界面优化
- ✅ 位置获取改进
- ✅ 护眼配色

### v1.0
- 基础功能实现

---

**享受健康饮食！** 🍲🥗🍜
