# 养生饮食推荐应用 - 快速参考

## 🚀 快速启动

### Windows用户
双击运行 `启动应用.bat`

### 手动启动
```bash
# 在food目录下执行
python -m http.server 8000
```

然后访问: http://localhost:8000

## 🔑 首次使用配置

1. 在浏览器打开应用
2. 点击"生成饮食推荐"按钮
3. 输入智谱AI的API Key（格式: id.secret）
4. API Key会自动保存在浏览器中

**获取API Key**: https://open.bigmodel.cn/

## 📱 主要功能

### 1. 时间设置
- **自动获取**: 点击"🔄 自动获取当前时间"
- **手动设置**: 直接在日期和时间选择器中修改

### 2. 位置和天气
- **自动获取**: 点击"📍 自动获取位置"（需要授权）
- **手动选择**: 在天气下拉框中选择

### 3. 餐饮选择
- 早中晚: 🌅早餐 / ☀️午餐 / 🌙晚餐
- 饮食类型: 🥗日常饮食 / 💊药膳饮食

### 4. 生成推荐
点击"✨ 生成饮食推荐"按钮

## 🎨 特色功能

### 四季主题
- **春季** (3月21日-5月20日): 嫩绿渐变
- **夏季** (5月21日-8月22日): 清凉蓝调
- **秋季** (8月23日-11月22日): 金黄橙红
- **冬季** (11月23日-3月20日): 暖白雪景

### 24节气支持
系统自动识别当天所处的节气，并结合节气特点推荐饮食

### 营养分析
- 总热量计算
- 三大营养素比例
- 维生素和矿物质含量
- 交互式饼图展示

## 🧪 测试功能

访问测试页面: http://localhost:8000/tests/test_sample.html

包含7项测试:
1. API Key测试
2. 节气判断测试
3. 季节主题测试
4. 提示词加载测试
5. 日志记录测试
6. 完整推荐流程测试
7. 数据格式兼容性测试

## 📊 查看日志

打开浏览器控制台（F12），输入：

```javascript
// 查看所有日志
app.logger.getLogs()

// 导出日志（下载JSON文件）
app.logger.exportLogs()

// 清空日志
app.logger.clearLogs()
```

## 💡 使用技巧

### 早餐推荐（5-9点）
- 温补养胃
- 易消化食物
- 如: 粥品、温牛奶、鸡蛋

### 午餐推荐（11-14点）
- 营养均衡
- 荤素搭配
- 如: 米饭+肉类+蔬菜+汤

### 晚餐推荐（17-20点）
- 清淡易消化
- 避免油腻
- 如: 清淡蔬菜、汤品

## 🔧 自定义配置

### 修改提示词
编辑 `prompts/food_recommendation_prompt.txt`

支持占位符:
- `{date}`: 日期
- `{time}`: 时间
- `{mealPeriod}`: 餐次
- `{dietType}`: 饮食类型
- `{weather}`: 天气
- `{solarTerm}`: 节气
- `{season}`: 季节

### 修改主题颜色
编辑 `style.css` 的 `:root` 变量部分

## ⚠️ 常见问题

**Q: 提示"未找到API Key"**
- 设置环境变量: `ZHIPU_API_KEY`
- 或在浏览器中输入API Key

**Q: 提示词加载失败**
- 使用HTTP服务器运行（不要直接打开HTML）
- 检查prompts文件夹是否存在

**Q: 地理位置获取失败**
- 检查浏览器定位权限
- 手动选择天气即可

**Q: 营养图表不显示**
- 检查网络连接
- Chart.js需要从CDN加载

## 📁 项目结构

```
food/
├── index.html              # 主页面
├── style.css              # 样式
├── app.js                 # 主程序
├── prompts/               # 提示词
│   └── food_recommendation_prompt.txt
├── tests/                 # 测试
│   └── test_sample.html
├── logs/                  # 日志（后端）
├── README.md              # 详细说明
├── 快速参考.md           # 本文件
└── 启动应用.bat          # 启动脚本
```

## 🌟 核心优势

1. **专业**: 30年中医专家+注册营养师+五星级主厨级别推荐
2. **智能**: GLM-4.7大模型驱动，深度理解节气和养生理论
3. **精准**: 精确计算营养，科学搭配食材
4. **美观**: 四季动态主题，雅致设计
5. **实用**: 详细制作步骤，可直接照做
6. **全面**: 荤素搭配、干湿结合、营养均衡

---

**享受健康饮食，从四季养生开始！** 🍲🥗🍜
